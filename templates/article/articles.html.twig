{% extends 'base.html.twig' %}

{% block title %}Accueil Bolonews{% endblock %}

{% block body %}
    <h1>Bolonews</h1>

<div class="example-wrapper">

    <div class="search">
        <h2>Recherche</h2>
        {{ form_start(searchForm, { method: 'get', action: path('app_article') }) }}
            {{ form_row(searchForm.query) }}
            <button type="submit" class="btn btn-primary">üîç Rechercher</button>
        {{ form_end(searchForm) }}
    </div>

    <div class="barre-categorie">
        {# future cat√©gorie √©ventuellement #}
    </div>

    {% if articles is not null %}
        <h2>R√©sultat de votre recherche</h2>
        <div class="resulat-recherche">
            {% if articles is empty %}
                <p>Aucun article publi√© ne correspond √† votre recherche.</p>
            {% else %}
                {% for article in articles %}
                    <div class="article-card">
                        <h3>{{ article.titre }}</h3>
                        <p><strong>Cat√©gorie :</strong> {{ article.categorie.libelle }}</p>
                        <p><em>{{ article.chapeau }}</em></p>
                        <div>{{ article.contenu|nl2br }}</div>

                        {% if article.image %}
                            <div class="image">
                                <img src="{{ asset('uploadimage/' ~ article.image) }}" alt="illustration">
                            </div>
                        {% endif %}

                        <p>üïí Publi√© le {{ article.dateCreation|date('d/m/Y H:i') }}</p>
                        <p>üë§ Auteur : {{ article.auteur.pseudo ?? 'Inconnu' }}</p>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    {% endif %}
</div>
{% endblock %}
